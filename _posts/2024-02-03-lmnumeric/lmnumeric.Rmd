---
title: "(in progress) Simple Linear Regression with Numeric Predictor"
description: |
  If you want to know how your salary change when you are getting older, or check, whether there is a relationship between any other numeric predictor and numeric outcome, simple linear model is the way to go.
author:
  - name: Yury Zablotski
    url: https://yuzar-blog.netlify.app/
date: "`r format(Sys.time(), '%B %d, %Y')`"
categories:
  - videos
  - statistics
  - visualization
preview: thumbnail_QR2.png
output:
  distill::distill_article:
    self_contained: false
    toc: true
    toc_float: true
    toc_depth: 6
    code_download: true
bibliography: /Users/zablotski/Documents/library.bib
# csl: american-political-science-association.csl
biblio-style: apalike
link-citations: yes
linkcolor: blue
#draft: true

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(tidyverse)    
# library(patchwork)    
# library(sjPlot)       
# library(gtsummary)
# library(quantreg)
# library(ISLR) 
# library(broom)
# library(effectsize)
# library(emmeans)
# library(flextable)
library(ISLR)
```

# This post as ca. ... minutes video

```{r, eval=T, echo=F}
vembedr::embed_youtube("") 
```



# Visualize the data

when possible, we'll see some outliers, may be they are not technically outliers, but visually. 

```{r echo=FALSE}
ggstatsplot::ggscatterstats(Wage, age, wage)
```


# Clean the data, otherwise shit in shit out


```{r}
library(tidyverse)
library(ISLR)
theme_set(theme_bw())

# clean the data
d <- Wage %>% 
  filter(wage < 200 & age < 60)
```

# Build the model for linear equation

we use an equation to describe the straight line relationship between x and y. This equation defines a particular mathematical model which, in general terms, is a simplified representation of a real-world situation or process that occurs in the population. If we imagine that, for each value of x, there is a population of y values, the equation would be:
$$ y =α+βx $$
where:
• Ypop is the predicted, expected, fitted or mean value of y for a given value of x.
• α is the constant term that represents the inter- ceptoftheline;itisthevalueofywhenxis equal to zero.
• β is the slope or gradient of the line and repre- sents the mean change in y for a unit change in x, i.e. it describes by how much y changes on average when x increases by one unit.

α and β are the parameters that define the line. They are both called regression coefficients although, frequently, you may find that this description is reserved only for β.
We have to estimate the two parameters α and β (by a and b, respectively) from our random sample of n pairs of observations, {(x1, y1), (x2, y2), (x3, y3), . . . , (xn, yn)}, in such a way that the line ‘fits’ the points as closely as possible.

Each deviation, the difference between an observed value of y and its predicted or fitted value for a given value of x, is called a residual 

... sum of the squared deviations is as small as possible (i.e. is minimized) - that's why least (sum of) squared (residuals). Remember, the square of both negative and positive numbers is always posi- tive. Hence the terminology, the method of least squares, to describe the technique for estimating α and β.

Then we estimate the best fitting line, called the regression equation of y on x, from our sample of observations as
Y = a + bx

- Y is the estimated predicted (fitted) or mean value of y for a given value of x.
- a is the estimated intercept of the line. 
- b is the estimated slope.

By substituting these values of x in the equation of the line, we can calculate the corresponding predicted Y values. We plot these points on the scatter diagram and join them by a straight line. *The line must not be extrapolated beyond the limits of the data.* Extrapolation makes no sense. 

Y = −46.04 + 1.04x
The estimated slope indicates that a sheep’s live weight increases on average by 1.04 kg as its chest girth increases by 1cm.This estimated regres- sion line is valid only in the specified range of values of chest girth (i.e. 60–90 cm) and should not be extrapolated beyond these limits.We have drawn the line by substituting three values of chest girth (65, 75 and 85 cm) into the equation to obtain the three corresponding values of live weight (21.56, 31.96 and 42.36 kg, respectively), plotting these points and joining them (Figure 10.6b).

```{r}
# build the model
m <- lm(formula = wage ~ age, data = d)
```

# Check model assumptions visually

```{r}
# check model assumptions visually
library(performance)
check_model(m)
# don't trust statistical test to much
check_normality(m)
check_heteroscedasticity(m)
```

# visualize predictions

```{r}
# visualize predictions
library(sjPlot)
plot_model(m, type = "eff", terms = "age")
```

# visualize estimates

```{r}
# visualize estimates
plot_model(m, show.values = TRUE)
tab_model(m)
```


# Get effect sizes

```{r}
# get effect sizes
library(effectsize)
interpret_r2(0.068)
?interpret_r2
```

# Report and interpret the model


```{r}
library(report)
report(m)
```
- Numerical predictor: increasing the numerical predictor by one unit (usually on the x-axes) changes the estimated outcome by its estimate. An increase of the temperature by 1 degree Celsius increases the predicted number of bicycles by 110.7.

# Make predictions

```{r}
# get particular predictions
predict(m, data.frame(age = c(20, 30, 40)) )

library(emmeans)
emmeans(m, ~ age, at = list(age = c(20, 30, 40)))
```

# What's next?

```{r}
library(ggstatsplot)
ggscatterstats(d, age, wage)
```


the x and y can not be changed. the regression of x on y is different then the regression of y on x. The regression method tells us something about the nature of the relationship between two variables, how one changes with the other, but it does not tell us how close that relationship is. To do this we need a different coefficient, correlation coefficient.






-----------------------------

If you think, I missed something, please comment on it, and I’ll improve this tutorial.

**Thank you for learning!**






