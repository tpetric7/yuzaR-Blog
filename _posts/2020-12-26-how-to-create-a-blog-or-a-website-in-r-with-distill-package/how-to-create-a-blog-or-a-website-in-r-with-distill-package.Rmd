---
title: "How to create a blog or a website in R with {distill} package (in progress!)"
description: |
  If you're not online, you don't exist. A personal webpage or a blog became the business card of the digital century. It shows who you are and what you are capable of. Thus: show, don't tell.
author:
  - name: Yury Zablotski
    url: https://yury-zablotski.netlify.app/
date: 12-26-2020
categories:
  - R & the Web
  - videos
output:
  distill::distill_article:
    self_contained: false
    toc: true
    toc_float: true
    code_download: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T, eval=FALSE)
```

# Why should we use *distill*?

Because it's an easy, quick and free way to go online today. All you need to create a website or a blog is R, RStudio and [*Netlify*](https://www.netlify.com/) account. Moreover, it requires very little programming. It might not look too fancy in the beginning (though totally enough for me), but with some effort you'll be able to re-design your website as you wish. Besides, *distill* was originally aimed to make scientific online-publishing easier, so, it can't be too bad ;). By the way, The blog you reading right now was created with *distill*. How? That's what this article is all about.

If you don't have or don't want to have a Github account (and continuous deployment), just read on. But if you are comfortable with Github and wanna continuously deploy via Github, jump to the chapter "Automated continuous publishing (deploying)".

# Manual intermittent publishing (deploying)

Why should we even consider manual instead of automated? Well, for some non-programmers going with the continuous deployment via Github immediately might be very challenging and frustrating. I've been there. We all know what is "better" and "more time effective" in the long run, but the complexity might sometimes turn us off from doing something we would love to, resulting into "it's just not my cup of tea" attitude. Other do not even need the continuous deployment, because they publish rarely, e.g. once per month, but would still like to be online. Going to the WordPress and co., which would most likely screw either code or code-output, is not always a solution. Fortunately, *distill* and *Netlify* greatly reduce the complexity of going online. Thus, have a look at the video and then follow the step by step procedure described below and you'll be online with your blog in minutes.

## 1. Install *distill* package

```{r}
install.packages("distill")
```

## 2. Create your blog either manually with RStudio or with one line of code

### 2.1. with RStudio

- open RStudio
- File => New Project... => New Directory => Distill Blog
- "Directory name" will be the name of the folder, where all the documents from your blog will be stored
- Choose the directory where this folder supposed to be stored
- Give your blog a name. You'll be able to rename it later
- Click "Create project"


### 2.2. with one line of code

```{r eval=FALSE}
distill::create_blog(dir = "my blog", title = "A cool name of my blog")
```


## 3. Build your website

A new RStudio window with newly created files and folders (right left corner) will open itself. One of the folders "_posts" will contain all your posts. There are already some examples of it. But don't bother about it now. 

- Find the "Build" tab and press "Build Website". You'll see the process of building.
- Click "Open in Browser" and explore your website

We aren't online yet. But very soon!

## 4. Publish your website via Netlify

- go the [*https://www.netlify.com/*](https://www.netlify.com/), sing up for *Netlify* (I used the Email way) and confirm your Email.
- In Netlify you'll see a window with: 
"Want to deploy a new site without connecting to Git?
Drag and drop your site folder here". If you somehow don't see it, find and press "Team overview".
- go to the directory of your blog and find the "_site" folder
- drag and drop the "_site" folder from your computed into this window
- wait a moment till the "Production" tab produces green colored "Published" and you'll get a funny named website in the left top corner, also green and starting with "https://". My was "https://condescending-darwin-bc567f.netlify.app" :)
- click on it

**Congrats, you are online!**

- Go to "Site settings" => "Change site name" 
- rename your site (e.g. better-name) and hit "Save"
- Click on the "better-name.netlify.app" to make sure the name has changed and the site is still working
- go back to RStudio to populate your blog

## 5. Create a new blog-post

- run the line below with the name of your choice

```{r eval=FALSE}
distill::create_post("My second blog post...this one will be really good :-)")
```

- a new partly pre-filled Rmarkdown document will open itself in RStudio
- fill it with some text and code as you usually do with Rmarkdown documents
- hit "Knit". **NOTE:** you'll need to always "Knit" all blog-posts individually. "Build Website" would not render them for you. However, the *distill*-Website (we are doing Blog now) would. You can learn more about the difference between them [here](https://rstudio.github.io/distill/website.html).
- this new post exists only on your local computer, still not online, thus...
- go back to *Netlify* and click "Deploys" tab, where you'll see another window with: "Need to update your site? Drag and drop your site folder here"
- drag and drop the "_site" folder there and wait till "Production" tab produces green "Published"
- click on the "better-name.netlify.app" to make sure the new blog-post appeared
- click on your post and enjoy your creative work for a moment ;), then 
- go back to RStudio and repeat step 5




















# Automated continuous publishing (deploying)

Continuous deployment is cool! But the path there can be a little prickly. This path may take a couple of hours or days (in my case ðŸ™ˆ). But, once there, you quickly forget all the troubles and *using Github with continuous deployment* becomes your second nature. So, I think there are many people which deploy either still manually or already continuously. But not many of them in the middle (I might be wrong though). Thus, I will assume you already have installed *Git* on your computer, created a *Github* account and connected your *RStudio* to your *Github*. If not, but you wanna be there, I could recommend a single short free online book which helped me go through it: [Happy Git and GitHub for the useR](https://happygitwithr.com/). 

## 1. Install *distill* and *usethis* packages

```{r}
install.packages("distill")
install.packages("usethis")
```

## 2. Create your blog either manually with RStudio or with one line of code

### 2.1. with RStudio

- open RStudio
- File => New Project... => New Directory => Distill Blog
- "Directory name" will be the name of the folder, where all the documents from your blog will be stored
- Choose the directory where this folder supposed to be stored
- Give your blog a name. You'll be able to rename it later
- Click "Create project"

### 2.2. with one line of code

```{r eval=FALSE}
distill::create_blog(dir = "my blog", title = "A cool name of my blog")
```


## 3. Build your website

A new RStudio window with newly created files and folders (right left corner) will open itself. One of the folders "_posts" will contain all your posts. There are already some examples of it. But don't bother about it now. 

- Find the "Build" tab and press "Build Website". You'll see the process of building.
- Click "Open in Browser" and explore your website

We aren't online yet. But very soon!

## 4. Connect to your github

- Run `use_git()` and answer two questions:
  - "Is it ok to commit them?" Don't commit by typing 3 for "No", or "Nope" or similar. 
  - "A restart of RStudio is required to activate the Git pane
Restart now?" Restart by typing 2 for "Yes" or "Yup".

```{r eval=FALSE}
usethis::use_git() 
```


After restart you'll see a "Git" tab near the Environment, History etc. That's gut! ;) Click on the "Git" tab and you'll see Empty boxed under "Staged", lot's of yellow question marks under "Status" and the documents names under "Path". 

### Stage and Commit

- Check all the boxes and press "Commit" button, which is between the "Status" and "History" tabs. A colorful window will pop up. This window will describe all the changes you are about to make to your blog. 

- Definitely describe what you have done for a future you, because then you'll always be able to get back to this, in case something stops working. That's what they call - a version control. 

- Write something like "first commit" and press "Commit". 

- Close or forget the window and go back to RStudio.


### Run use_github() to create a new Github repository


```{r eval=FALSE}
usethis::use_github() 
```

A new repository will be automatically created on your Github profile and the new browser window with your Github will pop up.

If you'll be asked: "Which git protocol to use?", choose the one with "https" and if you'll then be asked: "Are title and description ok?", agree with "Yes" or "Ok" or similar.

NOTE: if something else doesn't work, get back to the "Happy Git" book and work through it. You'll only need it once. Three main things you'd need to get working are:

- install git
- connect RStudio to your Github and 
- configure a Github Personal Access Token

## Publish your blog with Netlify

If you have a Netlify account you are fine, if not you can create one using your Github account. Then press:

- "New site from Git" in a green box

- Click on Configure Netlify on "Github", 

- Choose a newly created repository, you'll recognize the name ("my blog"?).

- **NOTE:** Make sure to set the "Publish Directory" to "_site" (could be "docs" if you checked some boxes while creating new project)

- Click deploy!

- you'll get an absurd or funny random name for your website (e.g. gracious-mestorf-194a9f), which you immediately by 

- clicking "Site settings" => "Change site name"

- now go on and click on the link of your blog. Congrats! Your blog is online! ;)

- go back to RStudio and create a new post

## Create a new blog-post

- run following command in the Console:

```{r eval=FALSE}
create_post("My second blog post...this will be really good :-)")
```

- a new RMarkdown document will be created and opened. 
- these new post is only on your local computer, but still not online, thus,
- "Knit" the document 
- go to the "Git" tab and check all the boxes
- press "Commit"
- add some description
- again press "Commit"
- wait until you see the "Close" button and close "Git commit" pop up window
- press "Push"
- wait until you see the "Close" button and close "Git push" pop up window
- close or ignore the other pop up window.
- Get back to your Webpage and refresh (it may take a few seconds, so, don't panic if the first refresh don't work). You should see a new blog-post.

Now you can repeat following routine for every post:
- Create or change posts
- Knit
- Commit
- Push

Congrats! You are continuosly deploy your online blog. 

## Always Knit after changing

By the way, if you don't want your post to publish until you really sure, you can start out as a draft:

```{r eval=FALSE}
distill::create_post("Another nice post", draft = TRUE)
```

"Knitting" blog posts is the only way to update it. They are not re-rendered when the site is built, because it's computationally expensive and prone to problems. Build Website would not work for blogs. 




# Blog configuration with "_site.yml"

- Open "_site.yml". You'll see something like that:

```{r}
name: "reproducible-finance-with-r"
title: "Reproducible Finance with R"
description: |
  Exploring reproducible finance with the R statistical 
  computing environment.
base_url: https://beta.rstudioconnect.com/content/11424/
navbar:
  logo: images/rstudio.png
  right:
    - text: "Home"
      href: index.html
    - text: "About"
      href: about.html
    - text: "Contributors"
      href: contributors.html
    - icon: fa fa-rss
      href: index.xml
output: distill::distill_article
```




# Improve your website or blog

- Listing pages

- Categories
 
Categories can be added similar to the blogdown in the 


  
```{r}
title: "How to create a blog or a website in R with {distill} package (in progress!)"
author:
  - name: Yury Zablotski
date: 12-26-2020
categories:
  - R & the Web
  - videos
```

- Thumbnails

Thumbnails (or previews) are the images which are displayed along the post. They serve as an eyecatcher. You can add a preview image into the postâ€™s metadata by adding a "preview" field:

```{r}
title: "Blog post on how to write blog posts"
description: |
  Here we were out of ideas, and therefore we are proud to announce
our new post about how to write a post. Creativity is a b**ch! ... And I love her!
preview: images/photo-of-me-because-I-am-sooo-beautifuuulll-toniiiight.png
```

  
  
# Theming - change desing and appearence of your blog


Distill blogs can use themes and CSS just like Distill sites. You can use the create_theme() function to add a theme CSS file in the current working directory:

create_theme(name = "theme") 

```{r}
distill::create_theme(name = "theme") 
```

To apply a custom theme site-wide, add a theme key to the top-level of your "_site.yml" configuration file:

```{r}
name: "distill"
title: "Distill for R Markdown"
theme: theme.css 
```



# Difference between a website and a blog

All articles on a website are re-rendered when the site is rebuilt while the blog-post are not. We need to knit each of the article separately. This might sound bad first, because we are not uptodate with our blog, but I personally found it great. See, like the authors of "distill" state: "Given that R package upgrades have a tendency to break older code, continuously re-rendering old posts is nearly impossible to do without errors, especially over longer periods of time." That happend to my old blogdown-generated website, where Hugo-Academic theme changes so dramatically that I could not modify my site anymore, and, since it was not on Github, I could not even ask R community, what is wrong. Thus, I totally understand, if you go for a manual deployment first (been there!), but I would recommend you to progress to Github and continuous deploy after you have got comfortable. Especially if you create a lot, automated deployment will save you lot's of time. However, my old blogdown-website is still online and running. Thus, I prefer blog instead of the website.


# Useful ressources

- Tom Mocks blog-post on how to build blogs with distill: https://themockup.blog/posts/2020-08-01-building-a-blog-with-distill/

- Learn more about using Distill at <https://rstudio.github.io/distill>.