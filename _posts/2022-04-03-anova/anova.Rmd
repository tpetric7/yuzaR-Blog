---
title: "R demo | ANOVA | One-Way | "
author:
  - name: Yury Zablotski
    url: https://yuzar-blog.netlify.app/
date: "`r format(Sys.time(), '%B %d, %Y')`"
categories:
  - videos
  - statistics
preview: thumbnail.png
output:
  distill::distill_article:
    self_contained: false
    toc: true
    toc_float: true
    toc_depth: 6
    code_download: true
bibliography: /Users/zablotski/Documents/library.bib
#csl: american-political-science-association.csl
biblio-style: apalike
link-citations: yes
linkcolor: blue
draft: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = T, warning = T, message = T)
```

## This post as a video 

I recommend to watch a video first, because I highlight things I talk about. It's ca. ... minutes long. 

```{r, eval=T, echo=F}
vembedr::embed_youtube("")
```

## Previous topics

[Two-Samples t-Test](https://yuzar-blog.netlify.app/posts/2022-03-11-ttest/) would help.

## Get the data

```{r}
# install.packages("tidyverse")  # for everything ;)
library(tidyverse)

#install.packages("ISLR")
library(ISLR)

set.seed(1)  # for reproducibility
d <- Wage %>% 
  group_by(education) %>% 
  sample_n(10)
```


{ISLR} package provides a {Wage} dataset, with salaries of IT and industrial workers. We'll take 15 random people from every group and compare their salaries in order to figure out who ears more.

## Check normality

But before using a nonparametric Mann-Whitney U Test, **we have to make sure that our data is really not-normally distributed**. Because using Mann-Whitney U test for normally distributed data, out of laziness to check the normality, might produce a completely wrong result. 

For that we'll use the {normality} function from {dlookr} package, which conducts Shapiro-Wilk normality tests with every group. Low p-value in one of the group is enough to conclude that our data is not-normally distributed, so now we are sure that using a **Mann-Whitney U test** is a right choice.

![](not_normal.png)

```{r}
# install.packages("dlookr")
library(dlookr)
d %>% 
  group_by(education) %>% 
  normality(wage)
```


## Compute Mann-Whitney U Test 

And the best way to compute our test (in my opinion) is the {ggbetweenstats} function from {ggstatsplot} package, which needs only 4 arguments:

- first, **our data** - d, with
- **x** - as the grouping variable - jobclass, and
- **y** - being salaries 
- finally, since our data is not-normally distributed, we'll choose a **nonparametric type** of statistical approach, and {ggbetweenstats} automatically uses Mann-Whitney U Test for comparing two groups.

Such simple command results in this statistically rich and publication ready plot! Now, let's interpret the results.

```{r}
# install.packages("ggstatsplot")
library(ggstatsplot)

ggbetweenstats(
  data = d,
  x    = education, 
  y    = wage, 
  type = "parametric")

ggsave(filename = "anova.jpg", plot = last_plot(), width = 6, height = 4)
```










